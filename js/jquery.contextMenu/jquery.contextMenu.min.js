
/*!
 * jQuery contextMenu - Plugin for simple contextMenu handling
 *
 * Version: 1.6.5
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(c,d){c.support.htmlMenuitem=("HTMLMenuItemElement" in window);c.support.htmlCommand=("HTMLCommandElement" in window);c.support.eventSelectstart=("onselectstart" in document.documentElement);if(!c.ui||!c.ui.widget){var r=c.cleanData;c.cleanData=function(t){for(var u=0,v;(v=t[u])!=null;u++){try{c(v).triggerHandler("remove")}catch(w){}}r(t)}}var p=null,b=false,n=c(window),h=0,g={},l={},k={},i={selector:null,appendTo:null,trigger:"right",autoHide:false,delay:200,reposition:true,determinePosition:function(t){if(c.ui&&c.ui.position){t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none")}else{var u=this.offset();u.top+=this.outerHeight();u.left+=this.outerWidth()/2-t.outerWidth()/2;t.css(u)}},position:function(v,B,A){var z=this,w;if(!B&&!A){v.determinePosition.call(this,v.$menu);return}else{if(B==="maintain"&&A==="maintain"){w=v.$menu.position()}else{w={top:A,left:B}}}var t=n.scrollTop()+n.height(),C=n.scrollLeft()+n.width(),D=v.$menu.height(),u=v.$menu.width();if(w.top+D>t){w.top-=D}if(w.left+u>C){w.left-=u}v.$menu.css(w)},positionSubmenu:function(t){if(c.ui&&c.ui.position){t.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","")}else{var u={top:0,left:this.outerWidth()};t.css(u)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:c.noop,hide:c.noop},callback:null,items:{}},j={timer:null,pageX:null,pageY:null},e=function(v){var u=0,t=v;while(true){u=Math.max(u,parseInt(t.css("z-index"),10)||0);t=t.parent();if(!t||!t.length||"html body".indexOf(t.prop("nodeName").toLowerCase())>-1){break}}return u},s={abortevent:function(t){t.preventDefault();t.stopImmediatePropagation()},contextmenu:function(v){var u=c(this);v.preventDefault();v.stopImmediatePropagation();if(v.data.trigger!="right"&&v.originalEvent){return}if(u.hasClass("context-menu-active")){return}if(!u.hasClass("context-menu-disabled")){p=u;if(v.data.build){var t=v.data.build(p,v);if(t===false){return}v.data=c.extend(true,{},i,v.data,t||{});if(!v.data.items||c.isEmptyObject(v.data.items)){if(window.console){(console.error||console.log)("No items specified to show in contextMenu")}throw new Error("No Items sepcified")}v.data.$trigger=p;f.create(v.data)}f.show.call(u,v.data,v.pageX,v.pageY)}},click:function(t){t.preventDefault();t.stopImmediatePropagation();c(this).trigger(c.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(u){var t=c(this);if(p&&p.length&&!p.is(t)){p.data("contextMenu").$menu.trigger("contextmenu:hide")}if(u.button==2){p=t.data("contextMenuActive",true)}},mouseup:function(u){var t=c(this);if(t.data("contextMenuActive")&&p&&p.length&&p.is(t)&&!t.hasClass("context-menu-disabled")){u.preventDefault();u.stopImmediatePropagation();p=t;t.trigger(c.Event("contextmenu",{data:u.data,pageX:u.pageX,pageY:u.pageY}))}t.removeData("contextMenuActive")},mouseenter:function(v){var u=c(this),t=c(v.relatedTarget),w=c(document);if(t.is(".context-menu-list")||t.closest(".context-menu-list").length){return}if(p&&p.length){return}j.pageX=v.pageX;j.pageY=v.pageY;j.data=v.data;w.on("mousemove.contextMenuShow",s.mousemove);j.timer=setTimeout(function(){j.timer=null;w.off("mousemove.contextMenuShow");p=u;u.trigger(c.Event("contextmenu",{data:j.data,pageX:j.pageX,pageY:j.pageY}))},v.data.delay)},mousemove:function(t){j.pageX=t.pageX;j.pageY=t.pageY},mouseleave:function(u){var t=c(u.relatedTarget);if(t.is(".context-menu-list")||t.closest(".context-menu-list").length){return}try{clearTimeout(j.timer)}catch(u){}j.timer=null},layerClick:function(w){var A=c(this),C=A.data("contextMenuRoot"),u=false,v=w.button,D=w.pageX,B=w.pageY,z,t,E;w.preventDefault();w.stopImmediatePropagation();setTimeout(function(){var G,F,y;var x=((C.trigger=="left"&&v===0)||(C.trigger=="right"&&v===2));if(document.elementFromPoint){C.$layer.hide();z=document.elementFromPoint(D-n.scrollLeft(),B-n.scrollTop());C.$layer.show()}if(C.reposition&&x){if(document.elementFromPoint){if(C.$trigger.is(z)||C.$trigger.has(z).length){C.position.call(C.$trigger,C,D,B);return}}else{t=C.$trigger.offset();G=c(window);t.top+=G.scrollTop();if(t.top<=w.pageY){t.left+=G.scrollLeft();if(t.left<=w.pageX){t.bottom=t.top+C.$trigger.outerHeight();if(t.bottom>=w.pageY){t.right=t.left+C.$trigger.outerWidth();if(t.right>=w.pageX){C.position.call(C.$trigger,C,D,B);return}}}}}}if(z&&x){C.$trigger.one("contextmenu:hidden",function(){c(z).contextMenu({x:D,y:B})})}C.$menu.trigger("contextmenu:hide")},50)},keyStop:function(u,t){if(!t.isInput){u.preventDefault()}u.stopPropagation()},key:function(x){var v=p.data("contextMenu")||{};switch(x.keyCode){case 9:case 38:s.keyStop(x,v);if(v.isInput){if(x.keyCode==9&&x.shiftKey){x.preventDefault();v.$selected&&v.$selected.find("input, textarea, select").blur();v.$menu.trigger("prevcommand");return}else{if(x.keyCode==38&&v.$selected.find("input, textarea, select").prop("type")=="checkbox"){x.preventDefault();return}}}else{if(x.keyCode!=9||x.shiftKey){v.$menu.trigger("prevcommand");return}}case 40:s.keyStop(x,v);if(v.isInput){if(x.keyCode==9){x.preventDefault();v.$selected&&v.$selected.find("input, textarea, select").blur();v.$menu.trigger("nextcommand");return}else{if(x.keyCode==40&&v.$selected.find("input, textarea, select").prop("type")=="checkbox"){x.preventDefault();return}}}else{v.$menu.trigger("nextcommand");return}break;case 37:s.keyStop(x,v);if(v.isInput||!v.$selected||!v.$selected.length){break}if(!v.$selected.parent().hasClass("context-menu-root")){var w=v.$selected.parent().parent();v.$selected.trigger("contextmenu:blur");v.$selected=w;return}break;case 39:s.keyStop(x,v);if(v.isInput||!v.$selected||!v.$selected.length){break}var u=v.$selected.data("contextMenu")||{};if(u.$menu&&v.$selected.hasClass("context-menu-submenu")){v.$selected=null;u.$selected=null;u.$menu.trigger("nextcommand");return}break;case 35:case 36:if(v.$selected&&v.$selected.find("input, textarea, select").length){return}else{(v.$selected&&v.$selected.parent()||v.$menu).children(":not(.disabled, .not-selectable)")[x.keyCode==36?"first":"last"]().trigger("contextmenu:focus");x.preventDefault();return}break;case 13:s.keyStop(x,v);if(v.isInput){if(v.$selected&&!v.$selected.is("textarea, select")){x.preventDefault();return}break}v.$selected&&v.$selected.trigger("mouseup");return;case 32:case 33:case 34:s.keyStop(x,v);return;case 27:s.keyStop(x,v);v.$menu.trigger("contextmenu:hide");return;default:var t=(String.fromCharCode(x.keyCode)).toUpperCase();if(v.accesskeys[t]){v.accesskeys[t].$node.trigger(v.accesskeys[t].$menu?"contextmenu:focus":"mouseup");return}break}x.stopPropagation();v.$selected&&v.$selected.trigger(x)},prevItem:function(x){x.stopPropagation();var w=c(this).data("contextMenu")||{};if(w.$selected){var t=w.$selected;w=w.$selected.parent().data("contextMenu")||{};w.$selected=t}var v=w.$menu.children(),u=!w.$selected||!w.$selected.prev().length?v.last():w.$selected.prev(),z=u;while(u.hasClass("disabled")||u.hasClass("not-selectable")){if(u.prev().length){u=u.prev()}else{u=v.last()}if(u.is(z)){return}}if(w.$selected){s.itemMouseleave.call(w.$selected.get(0),x)}s.itemMouseenter.call(u.get(0),x);var y=u.find("input, textarea, select");if(y.length){y.focus()}},nextItem:function(x){x.stopPropagation();var w=c(this).data("contextMenu")||{};if(w.$selected){var t=w.$selected;w=w.$selected.parent().data("contextMenu")||{};w.$selected=t}var v=w.$menu.children(),u=!w.$selected||!w.$selected.next().length?v.first():w.$selected.next(),z=u;while(u.hasClass("disabled")||u.hasClass("not-selectable")){if(u.next().length){u=u.next()}else{u=v.first()}if(u.is(z)){return}}if(w.$selected){s.itemMouseleave.call(w.$selected.get(0),x)}s.itemMouseenter.call(u.get(0),x);var y=u.find("input, textarea, select");if(y.length){y.focus()}},focusInput:function(x){var w=c(this).closest(".context-menu-item"),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;t.$selected=u.$selected=w;t.isInput=u.isInput=true},blurInput:function(x){var w=c(this).closest(".context-menu-item"),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;t.isInput=u.isInput=false},menuMouseenter:function(u){var t=c(this).data().contextMenuRoot;t.hovering=true},menuMouseleave:function(u){var t=c(this).data().contextMenuRoot;if(t.$layer&&t.$layer.is(u.relatedTarget)){t.hovering=false}},itemMouseenter:function(x){var w=c(this),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;t.hovering=true;if(x&&t.$layer&&t.$layer.is(x.relatedTarget)){x.preventDefault();x.stopImmediatePropagation()}(u.$menu?u:t).$menu.children(".hover").trigger("contextmenu:blur");if(w.hasClass("disabled")||w.hasClass("not-selectable")){u.$selected=null;return}w.trigger("contextmenu:focus")},itemMouseleave:function(x){var w=c(this),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;if(t!==u&&t.$layer&&t.$layer.is(x.relatedTarget)){t.$selected&&t.$selected.trigger("contextmenu:blur");x.preventDefault();x.stopImmediatePropagation();t.$selected=u.$selected=u.$node;return}w.trigger("contextmenu:blur")},itemClick:function(y){var x=c(this),w=x.data(),v=w.contextMenu,t=w.contextMenuRoot,u=w.contextMenuKey,z;if(!v.items[u]||x.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){return}y.preventDefault();y.stopImmediatePropagation();if(c.isFunction(t.callbacks[u])&&Object.prototype.hasOwnProperty.call(t.callbacks,u)){z=t.callbacks[u]}else{if(c.isFunction(t.callback)){z=t.callback}else{return}}if(z.call(t.$trigger,u,t)!==false){t.$menu.trigger("contextmenu:hide")}else{if(t.$menu.parent().length){f.update.call(t.$trigger,t)}}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(v,u){var t=c(this).data("contextMenuRoot");f.hide.call(t.$trigger,t,u&&u.force)},focusItem:function(x){x.stopPropagation();var w=c(this),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;w.addClass("hover").siblings(".hover").trigger("contextmenu:blur");u.$selected=t.$selected=w;if(u.$node){t.positionSubmenu.call(u.$node,u.$menu)}},blurItem:function(x){x.stopPropagation();var w=c(this),v=w.data(),u=v.contextMenu,t=v.contextMenuRoot;w.removeClass("hover");u.$selected=null}},f={show:function(w,u,A){var t=c(this),z,v={};c("#context-menu-layer").trigger("mousedown");w.$trigger=t;if(w.events.show.call(t,w)===false){p=null;return}f.update.call(t,w);w.position.call(t,w,u,A);if(w.zIndex){v.zIndex=e(t)+w.zIndex}f.layer.call(w.$menu,w,v.zIndex);w.$menu.find("ul").css("zIndex",v.zIndex+1);w.$menu.css(v)[w.animation.show](w.animation.duration,function(){t.trigger("contextmenu:visible")});t.data("contextMenu",w).addClass("context-menu-active");c(document).off("keydown.contextMenu").on("keydown.contextMenu",s.key);if(w.autoHide){c(document).on("mousemove.contextMenuAutoHide",function(x){var y=t.offset();y.right=y.left+t.outerWidth();y.bottom=y.top+t.outerHeight();if(w.$layer&&!w.hovering&&(!(x.pageX>=y.left&&x.pageX<=y.right)||!(x.pageY>=y.top&&x.pageY<=y.bottom))){w.$menu.trigger("contextmenu:hide")}})}},hide:function(u,v){var t=c(this);if(!u){u=t.data("contextMenu")||{}}if(!v&&u.events&&u.events.hide.call(t,u)===false){return}t.removeData("contextMenu").removeClass("context-menu-active");if(u.$layer){setTimeout((function(x){return function(){x.remove()}})(u.$layer),10);try{delete u.$layer}catch(w){u.$layer=null}}p=null;u.$menu.find(".hover").trigger("contextmenu:blur");u.$selected=null;c(document).off(".contextMenuAutoHide").off("keydown.contextMenu");u.$menu&&u.$menu[u.animation.hide](u.animation.duration,function(){if(u.build){u.$menu.remove();c.each(u,function(x,y){switch(x){case"ns":case"selector":case"build":case"trigger":return true;default:u[x]=d;try{delete u[x]}catch(z){}return true}})}setTimeout(function(){t.trigger("contextmenu:hidden")},10)})},create:function(u,t){if(t===d){t=u}u.$menu=c('<ul class="context-menu-list"></ul>').addClass(u.className||"").data({contextMenu:u,contextMenuRoot:t});c.each(["callbacks","commands","inputs"],function(w,v){u[v]={};if(!t[v]){t[v]={}}});t.accesskeys||(t.accesskeys={});c.each(u.items,function(x,y){var C=c('<li class="context-menu-item"></li>').addClass(y.className||""),v=null,B=null;C.on("click",c.noop);y.$node=C.data({contextMenu:u,contextMenuRoot:t,contextMenuKey:x});if(y.accesskey){var z=m(y.accesskey);for(var w=0,A;A=z[w];w++){if(!t.accesskeys[A]){t.accesskeys[A]=y;y._name=y.name.replace(new RegExp("("+A+")","i"),'<span class="context-menu-accesskey">$1</span>');break}}}if(typeof y=="string"){C.addClass("context-menu-separator not-selectable")}else{if(y.type&&k[y.type]){k[y.type].call(C,y,u,t);c.each([u,t],function(E,D){D.commands[x]=y;if(c.isFunction(y.callback)){D.callbacks[x]=y.callback}})}else{if(y.type=="html"){C.addClass("context-menu-html not-selectable")}else{if(y.type){v=c("<label></label>").appendTo(C);c("<span></span>").html(y._name||y.name).appendTo(v);C.addClass("context-menu-input");u.hasTypes=true;c.each([u,t],function(E,D){D.commands[x]=y;D.inputs[x]=y})}else{if(y.items){y.type="sub"}}}switch(y.type){case"text":B=c('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+x).val(y.value||"").appendTo(v);break;case"textarea":B=c('<textarea name=""></textarea>').attr("name","context-menu-input-"+x).val(y.value||"").appendTo(v);if(y.height){B.height(y.height)}break;case"checkbox":B=c('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+x).val(y.value||"").prop("checked",!!y.selected).prependTo(v);break;case"radio":B=c('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+y.radio).val(y.value||"").prop("checked",!!y.selected).prependTo(v);break;case"select":B=c('<select name="">').attr("name","context-menu-input-"+x).appendTo(v);if(y.options){c.each(y.options,function(D,E){c("<option></option>").val(D).text(E).appendTo(B)});B.val(y.selected)}break;case"sub":c("<span></span>").html(y._name||y.name).appendTo(C);y.appendTo=y.$node;f.create(y,t);C.data("contextMenu",y).addClass("context-menu-submenu");y.callback=null;break;case"html":c(y.html).appendTo(C);break;default:c.each([u,t],function(E,D){D.commands[x]=y;if(c.isFunction(y.callback)){D.callbacks[x]=y.callback}});c("<span></span>").html(y._name||y.name||"").appendTo(C);break}if(y.type&&y.type!="sub"&&y.type!="html"){B.on("focus",s.focusInput).on("blur",s.blurInput);if(y.events){B.on(y.events,u)}}if(y.icon){C.addClass("icon icon-"+y.icon)}}}y.$input=B;y.$label=v;C.appendTo(u.$menu);if(!u.hasTypes&&c.support.eventSelectstart){C.on("selectstart.disableTextSelect",s.abortevent)}});if(!u.$node){u.$menu.css("display","none").addClass("context-menu-root")}u.$menu.appendTo(u.appendTo||document.body)},resize:function(t,u){t.css({position:"absolute",display:"block"});t.data("width",Math.ceil(t.width())+1);t.css({position:"static",minWidth:"0px",maxWidth:"100000px"});t.find("> li > ul").each(function(){f.resize(c(this),true)});if(!u){t.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return c(this).data("width")})}},update:function(v,u){var t=this;if(u===d){u=v;f.resize(v.$menu)}v.$menu.children().each(function(){var w=c(this),x=w.data("contextMenuKey"),z=v.items[x],y=(c.isFunction(z.disabled)&&z.disabled.call(t,x,u))||z.disabled===true;w[y?"addClass":"removeClass"]("disabled");if(z.type){w.find("input, select, textarea").prop("disabled",y);switch(z.type){case"text":case"textarea":z.$input.val(z.value||"");break;case"checkbox":case"radio":z.$input.val(z.value||"").prop("checked",!!z.selected);break;case"select":z.$input.val(z.selected||"");break}}if(z.$menu){f.update.call(t,z,u)}})},layer:function(u,v){var t=u.$layer=c('<div id="context-menu-layer" style="position:fixed; z-index:'+v+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",u).insertBefore(this).on("contextmenu",s.abortevent).on("mousedown",s.layerClick);if(!c.support.fixedPosition){t.css({position:"absolute",height:c(document).height()})}return t}};function m(y){var w=y.split(/\s+/),x=[];for(var v=0,u;u=w[v];v++){u=u[0].toUpperCase();x.push(u)}return x}c.fn.contextMenu=function(t){if(t===d){this.first().trigger("contextmenu")}else{if(t.x&&t.y){this.first().trigger(c.Event("contextmenu",{pageX:t.x,pageY:t.y}))}else{if(t==="hide"){var u=this.data("contextMenu").$menu;u&&u.trigger("contextmenu:hide")}else{if(t==="destroy"){c.contextMenu("destroy",{context:this})}else{if(c.isPlainObject(t)){t.context=this;c.contextMenu("create",t)}else{if(t){this.removeClass("context-menu-disabled")}else{if(!t){this.addClass("context-menu-disabled")}}}}}}}return this};c.contextMenu=function(x,B){if(typeof x!="string"){B=x;x="create"}if(typeof B=="string"){B={selector:B}}else{if(B===d){B={}}}var v=c.extend(true,{},i,B||{});var w=c(document);var z=w;var A=false;if(!v.context||!v.context.length){v.context=document}else{z=c(v.context).first();v.context=z.get(0);A=v.context!==document}switch(x){case"create":if(!v.selector){throw new Error("No selector specified")}if(v.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+v.selector+'" as it contains a reserved className')}if(!v.build&&(!v.items||c.isEmptyObject(v.items))){throw new Error("No Items sepcified")}h++;v.ns=".contextMenu"+h;if(!A){g[v.selector]=v.ns}l[v.ns]=v;if(!v.trigger){v.trigger="right"}if(!b){w.on({"contextmenu:hide.contextMenu":s.hideMenu,"prevcommand.contextMenu":s.prevItem,"nextcommand.contextMenu":s.nextItem,"contextmenu.contextMenu":s.abortevent,"mouseenter.contextMenu":s.menuMouseenter,"mouseleave.contextMenu":s.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",s.inputClick).on({"mouseup.contextMenu":s.itemClick,"contextmenu:focus.contextMenu":s.focusItem,"contextmenu:blur.contextMenu":s.blurItem,"contextmenu.contextMenu":s.abortevent,"mouseenter.contextMenu":s.itemMouseenter,"mouseleave.contextMenu":s.itemMouseleave},".context-menu-item");b=true}z.on("contextmenu"+v.ns,v.selector,v,s.contextmenu);if(A){z.on("remove"+v.ns,function(){c(this).contextMenu("destroy")})}switch(v.trigger){case"hover":z.on("mouseenter"+v.ns,v.selector,v,s.mouseenter).on("mouseleave"+v.ns,v.selector,v,s.mouseleave);break;case"left":z.on("click"+v.ns,v.selector,v,s.click);break}if(!v.build){f.create(v)}break;case"destroy":var t;if(A){var u=v.context;c.each(l,function(C,E){if(E.context!==u){return true}t=c(".context-menu-list").filter(":visible");if(t.length&&t.data().contextMenuRoot.$trigger.is(c(E.context).find(E.selector))){t.trigger("contextmenu:hide",{force:true})}try{if(l[E.ns].$menu){l[E.ns].$menu.remove()}delete l[E.ns]}catch(D){l[E.ns]=null}c(E.context).off(E.ns);return true})}else{if(!v.selector){w.off(".contextMenu .contextMenuAutoHide");c.each(l,function(C,D){c(D.context).off(D.ns)});g={};l={};h=0;b=false;c("#context-menu-layer, .context-menu-list").remove()}else{if(g[v.selector]){t=c(".context-menu-list").filter(":visible");if(t.length&&t.data().contextMenuRoot.$trigger.is(v.selector)){t.trigger("contextmenu:hide",{force:true})}try{if(l[g[v.selector]].$menu){l[g[v.selector]].$menu.remove()}delete l[g[v.selector]]}catch(y){l[g[v.selector]]=null}w.off(g[v.selector])}}}break;case"html5":if((!c.support.htmlCommand&&!c.support.htmlMenuitem)||(typeof B=="boolean"&&B)){c('menu[type="context"]').each(function(){if(this.id){c.contextMenu({selector:"[contextmenu="+this.id+"]",items:c.contextMenu.fromMenu(this)})}}).css("display","none")}break;default:throw new Error('Unknown operation "'+x+'"')}return this};c.contextMenu.setInputValues=function(t,u){if(u===d){u={}}c.each(t.inputs,function(v,w){switch(w.type){case"text":case"textarea":w.value=u[v]||"";break;case"checkbox":w.selected=u[v]?true:false;break;case"radio":w.selected=(u[w.radio]||"")==w.value?true:false;break;case"select":w.selected=u[v]||"";break}})};c.contextMenu.getInputValues=function(t,u){if(u===d){u={}}c.each(t.inputs,function(v,w){switch(w.type){case"text":case"textarea":case"select":u[v]=w.$input.val();break;case"checkbox":u[v]=w.$input.prop("checked");break;case"radio":if(w.$input.prop("checked")){u[w.radio]=w.value}break}});return u};function o(t){return(t.id&&c('label[for="'+t.id+'"]').val())||t.name}function a(v,u,t){if(!t){t=0}u.each(function(){var w=c(this),z=this,A=this.nodeName.toLowerCase(),x,y;if(A=="label"&&w.find("input, textarea, select").length){x=w.text();w=w.children().first();z=w.get(0);A=z.nodeName.toLowerCase()}switch(A){case"menu":y={name:w.attr("label"),items:{}};t=a(y.items,w.children(),t);break;case"a":case"button":y={name:w.text(),disabled:!!w.attr("disabled"),callback:(function(){return function(){w.click()}})()};break;case"menuitem":case"command":switch(w.attr("type")){case d:case"command":case"menuitem":y={name:w.attr("label"),disabled:!!w.attr("disabled"),callback:(function(){return function(){w.click()}})()};break;case"checkbox":y={type:"checkbox",disabled:!!w.attr("disabled"),name:w.attr("label"),selected:!!w.attr("checked")};break;case"radio":y={type:"radio",disabled:!!w.attr("disabled"),name:w.attr("label"),radio:w.attr("radiogroup"),value:w.attr("id"),selected:!!w.attr("checked")};break;default:y=d}break;case"hr":y="-------";break;case"input":switch(w.attr("type")){case"text":y={type:"text",name:x||o(z),disabled:!!w.attr("disabled"),value:w.val()};break;case"checkbox":y={type:"checkbox",name:x||o(z),disabled:!!w.attr("disabled"),selected:!!w.attr("checked")};break;case"radio":y={type:"radio",name:x||o(z),disabled:!!w.attr("disabled"),radio:!!w.attr("name"),value:w.val(),selected:!!w.attr("checked")};break;default:y=d;break}break;case"select":y={type:"select",name:x||o(z),disabled:!!w.attr("disabled"),selected:w.val(),options:{}};w.children().each(function(){y.options[this.value]=c(this).text()});break;case"textarea":y={type:"textarea",name:x||o(z),disabled:!!w.attr("disabled"),value:w.val()};break;case"label":break;default:y={type:"html",html:w.clone(true)};break}if(y){t++;v["key"+t]=y}});return t}c.contextMenu.fromMenu=function(u){var v=c(u),t={};a(t,v.children());return t};c.contextMenu.defaults=i;c.contextMenu.types=k;c.contextMenu.handle=s;c.contextMenu.op=f;c.contextMenu.menus=l})(jQuery);(function(a,b){a(function(){if(!window.prettyPrint){return}a(".showcase").each(function(){var d=a(c||this),f,g,e,c;if(d.data("showcaseImport")){d=a(d.data("showcaseImport"));c=d.get(0)}g=(c||this).nodeName.toLowerCase();e=g=="script"?"js":(g=="style"?"css":"html");if(e=="html"){f=a("<div></div>").append(d.clone()).html()}else{f=d.text()}a('<pre class="prettyprint lang-'+e+'"></pre>').text(f).insertBefore(this);c&&a(this).remove()});prettyPrint()})})(jQuery);var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function d(F){function w(J){var K=J.charCodeAt(0);if(K!==92){return K}var I=J.charAt(1);return(K=k[I])?K:"0"<=I&&I<="7"?parseInt(J.substring(1),8):I==="u"||I==="x"?parseInt(J.substring(2),16):J.charCodeAt(1)}function C(I){if(I<32){return(I<16?"\\x0":"\\x")+I.toString(16)}I=String.fromCharCode(I);if(I==="\\"||I==="-"||I==="["||I==="]"){I="\\"+I}return I}function A(J){for(var M=J.substring(1,J.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),J=[],I=[],O=M[0]==="^",P=O?1:0,L=M.length;P<L;++P){var K=M[P];if(/\\[bdsw]/i.test(K)){J.push(K)}else{var K=w(K),N;P+2<L&&"-"===M[P+1]?(N=w(M[P+2]),P+=2):N=K;I.push([K,N]);N<65||K>122||(N<65||K>90||I.push([Math.max(65,K)|32,Math.min(N,90)|32]),N<97||K>122||I.push([Math.max(97,K)&-33,Math.min(N,122)&-33]))}}I.sort(function(Q,R){return Q[0]-R[0]||R[1]-Q[1]});M=[];K=[NaN,NaN];for(P=0;P<I.length;++P){L=I[P],L[0]<=K[1]+1?K[1]=Math.max(K[1],L[1]):M.push(K=L)}I=["["];O&&I.push("^");I.push.apply(I,J);for(P=0;P<M.length;++P){L=M[P],I.push(C(L[0])),L[1]>L[0]&&(L[1]+1>L[0]&&I.push("-"),I.push(C(L[1])))}I.push("]");return I.join("")}function E(J){for(var M=J.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),I=M.length,N=[],O=0,L=0;O<I;++O){var K=M[O];K==="("?++L:"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(N[K]=-1)}for(O=1;O<N.length;++O){-1===N[O]&&(N[O]=++G)}for(L=O=0;O<I;++O){K=M[O],K==="("?(++L,N[L]===void 0&&(M[O]="(?:")):"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(M[O]="\\"+N[L])}for(L=O=0;O<I;++O){"^"===M[O]&&"^"!==M[O+1]&&(M[O]="")}if(J.ignoreCase&&H){for(O=0;O<I;++O){K=M[O],J=K.charAt(0),K.length>=2&&J==="["?M[O]=A(K):J!=="\\"&&(M[O]=K.replace(/[A-Za-z]/g,function(P){P=P.charCodeAt(0);return"["+String.fromCharCode(P&-33,P|32)+"]"}))}}return M.join("")}for(var G=0,H=!1,x=!1,u=0,D=F.length;u<D;++u){var B=F[u];if(B.ignoreCase){x=!0}else{if(/[a-z]/i.test(B.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){H=!0;x=!1;break}}}for(var k={b:8,t:9,n:10,v:11,f:12,r:13},v=[],u=0,D=F.length;u<D;++u){B=F[u];if(B.global||B.multiline){throw Error(""+B)}v.push("(?:"+E(B)+")")}return RegExp(v.join("|"),x?"gi":"g")}function c(B){function u(E){switch(E.nodeType){case 1:if(x.test(E.className)){break}for(var F=E.firstChild;F;F=F.nextSibling){u(F)}F=E.nodeName;if("BR"===F||"LI"===F){w[D]="\n",C[D<<1]=A++,C[D++<<1|1]=E}break;case 3:case 4:F=E.nodeValue,F.length&&(F=k?F.replace(/\r\n?/g,"\n"):F.replace(/[\t\n\r ]+/g," "),w[D]=F,C[D<<1]=A,A+=F.length,C[D++<<1|1]=E)}}var x=/(?:^|\s)nocode(?:\s|$)/,w=[],A=0,C=[],D=0,v;B.currentStyle?v=B.currentStyle.whiteSpace:window.getComputedStyle&&(v=document.defaultView.getComputedStyle(B,q).getPropertyValue("white-space"));var k=v&&"pre"===v.substring(0,3);u(B);return{a:w.join("").replace(/\n$/,""),c:C}}function t(u,k,w,v){k&&(u={a:k,d:u},w(u),v.push.apply(v,u.e))}function h(u,k){function x(P){for(var F=P.d,C=[F,"pln"],L=0,J=P.a.match(A)||[],B={},E=0,N=J.length;E<N;++E){var K=J[E],O=B[K],D=void 0,M;if(typeof O==="string"){M=!1}else{var I=w[K.charAt(0)];if(I){D=K.match(I[1]),O=I[0]}else{for(M=0;M<v;++M){if(I=k[M],D=K.match(I[1])){O=I[0];break}}D||(O="pln")}if((M=O.length>=5&&"lang-"===O.substring(0,5))&&!(D&&typeof D[1]==="string")){M=!1,O="src"}M||(B[K]=O)}I=L;L+=K.length;if(M){M=D[1];var H=K.indexOf(M),G=H+M.length;D[2]&&(G=K.length-D[2].length,H=G-M.length);O=O.substring(5);t(F+I,K.substring(0,H),x,C);t(F+I+H,M,s(O,M),C);t(F+I+G,K.substring(G),x,C)}else{C.push(F+I,O)}}P.e=C}var w={},A;(function(){for(var G=u.concat(k),B=[],F={},H=0,E=G.length;H<E;++H){var D=G[H],I=D[3];if(I){for(var C=I.length;--C>=0;){w[I.charAt(C)]=D}}D=D[1];I=""+D;F.hasOwnProperty(I)||(B.push(D),F[I]=q)}B.push(/[\S\s]/);A=d(B)})();var v=k.length;return x}function o(u){var k=[],w=[];u.tripleQuotedStrings?k.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):u.multiLineStrings?k.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):k.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);u.verbatimStrings&&w.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var v=u.hashComments;v&&(u.cStyleComments?(v>1?k.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):k.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),w.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):k.push(["com",/^#[^\n\r]*/,q,"#"]));u.cStyleComments&&(w.push(["com",/^\/\/[^\n\r]*/,q]),w.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));u.regexLiterals&&w.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(v=u.types)&&w.push(["typ",v]);u=(""+u.keywords).replace(/^ | $/g,"");u.length&&w.push(["kwd",RegExp("^(?:"+u.replace(/[\s,]+/g,"|")+")\\b"),q]);k.push(["pln",/^\s+/,q," \r\n\t\xa0"]);w.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return h(k,w)}function r(H,x){function E(K){switch(K.nodeType){case 1:if(B.test(K.className)){break}if("BR"===K.nodeName){C(K),K.parentNode&&K.parentNode.removeChild(K)}else{for(K=K.firstChild;K;K=K.nextSibling){E(K)}}break;case 3:case 4:if(v){var k=K.nodeValue,L=k.match(I);if(L){var M=k.substring(0,L.index);K.nodeValue=M;(k=k.substring(L.index+L[0].length))&&K.parentNode.insertBefore(J.createTextNode(k),K.nextSibling);C(K);M||K.parentNode.removeChild(K)}}}}function C(K){function k(M,R){var Q=R?M.cloneNode(!1):M,P=M.parentNode;if(P){var P=k(P,1),O=M.nextSibling;P.appendChild(Q);for(var N=O;N;N=O){O=N.nextSibling,P.appendChild(N)}}return Q}for(;!K.nextSibling;){if(K=K.parentNode,!K){return}}for(var K=k(K.nextSibling,0),L;(L=K.parentNode)&&L.nodeType===1;){K=L}F.push(K)}var B=/(?:^|\s)nocode(?:\s|$)/,I=/\r\n?|\n/,J=H.ownerDocument,A;H.currentStyle?A=H.currentStyle.whiteSpace:window.getComputedStyle&&(A=J.defaultView.getComputedStyle(H,q).getPropertyValue("white-space"));var v=A&&"pre"===A.substring(0,3);for(A=J.createElement("LI");H.firstChild;){A.appendChild(H.firstChild)}for(var F=[A],D=0;D<F.length;++D){E(F[D])}x===(x|0)&&F[0].setAttribute("value",x);var u=J.createElement("OL");u.className="linenums";for(var w=Math.max(0,x-1|0)||0,D=0,G=F.length;D<G;++D){A=F[D],A.className="L"+(D+w)%10,A.firstChild||A.appendChild(J.createTextNode("\xa0")),u.appendChild(A)}H.appendChild(u)}function z(u,k){for(var w=k.length;--w>=0;){var v=k[w];y.hasOwnProperty(v)?window.console&&console.warn("cannot override language handler %s",v):y[v]=u}}function s(u,k){if(!u||!y.hasOwnProperty(u)){u=/^\s*</.test(k)?"default-markup":"default-code"}return y[u]}function p(X){var L=X.g;try{var T=c(X.h),Q=T.a;X.a=Q;X.c=T.c;X.d=0;s(L,Q)(X);var N=/\bMSIE\b/.test(navigator.userAgent),L=/\n/g,F=X.a,G=F.length,T=0,M=X.c,I=M.length,Q=0,U=X.e,R=U.length,X=0;U[R]=G;var H,K;for(K=H=0;K<R;){U[K]!==U[K+2]?(U[H++]=U[K++],U[H++]=U[K++]):K+=2}R=H;for(K=H=0;K<R;){for(var A=U[K],S=U[K+1],W=K+2;W+2<=R&&U[W+1]===S;){W+=2}U[H++]=A;U[H++]=S;K=W}for(U.length=H;Q<I;){var J=M[Q+2]||G,V=U[X+2]||G,W=Math.min(J,V),P=M[Q+1],O;if(P.nodeType!==1&&(O=F.substring(T,W))){N&&(O=O.replace(L,"\r"));P.nodeValue=O;var E=P.ownerDocument,D=E.createElement("SPAN");D.className=U[X+1];var B=P.parentNode;B.replaceChild(D,P);D.appendChild(P);T<J&&(M[Q+1]=P=E.createTextNode(F.substring(W,J)),B.insertBefore(P,D.nextSibling))}T=W;T>=J&&(Q+=2);T>=V&&(X+=2)}}catch(C){"console" in window&&console.log(C&&C.stack?C.stack:C)}}var m=["break,continue,do,else,for,if,return,while"],j=[[m,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],n=[j,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],l=[j,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],i=[l,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],j=[j,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],g=[m,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],f=[m,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],m=[m,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,b=/\S/,a=o({keywords:[n,i,j,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+g,f,m],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),y={};z(a,["default-code"]);z(h([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);z(h([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);z(h([],[["atv",/^[\S\s]+/]]),["uq.val"]);z(o({keywords:n,hashComments:!0,cStyleComments:!0,types:e}),["c","cc","cpp","cxx","cyc","m"]);z(o({keywords:"null,true,false"}),["json"]);z(o({keywords:i,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:e}),["cs"]);z(o({keywords:l,cStyleComments:!0}),["java"]);z(o({keywords:m,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);z(o({keywords:g,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);z(o({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);z(o({keywords:f,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);z(o({keywords:j,cStyleComments:!0,regexLiterals:!0}),["js"]);z(o({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);z(h([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(u,k,w){var v=document.createElement("PRE");v.innerHTML=u;w&&r(v,w);p({g:k,i:w,h:v});return v.innerHTML};window.prettyPrint=function(E){function v(){for(var L=window.PR_SHOULD_USE_CONTINUATION?w.now()+250:Infinity;u<A.length&&w.now()<L;u++){var O=A[u],I=O.className;if(I.indexOf("prettyprint")>=0){var I=I.match(B),K,H;if(H=!I){H=O;for(var M=void 0,N=H.firstChild;N;N=N.nextSibling){var J=N.nodeType,M=J===1?M?H:N:J===3?b.test(N.nodeValue)?H:M:M}H=(K=M===H?void 0:M)&&"CODE"===K.tagName}H&&(I=K.className.match(B));I&&(I=I[1]);H=!1;for(M=O.parentNode;M;M=M.parentNode){if((M.tagName==="pre"||M.tagName==="code"||M.tagName==="xmp")&&M.className&&M.className.indexOf("prettyprint")>=0){H=!0;break}}H||((H=(H=O.className.match(/\blinenums\b(?::(\d+))?/))?H[1]&&H[1].length?+H[1]:!0:!1)&&r(O,H),D={g:I,h:O,i:H},p(D))}}u<A.length?setTimeout(v,250):E&&E()}for(var C=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],A=[],x=0;x<C.length;++x){for(var F=0,G=C[x].length;F<G;++F){A.push(C[x][F])}}var C=q,w=Date;w.now||(w={now:function(){return +new Date}});var u=0,D,B=/\blang(?:uage)?-([\w.]+)(?!\S)/;v()};window.PR={createSimpleLexer:h,registerLangHandler:z,sourceDecorator:o,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();