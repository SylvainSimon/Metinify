<div class="col-lg-4">

    <div style="text-align: center; padding-top: 30px;">
        <h4>{{ objPlayer.getName }} - Niveau {{ objPlayer.getLevel }}</h4>

        {% if calculateGrade < 0 %}
            <h5 class="text-red" style="font-size: 16px;">{{ tabGrade[calculateGrade] }}</h5>
        {% else %}
            <h5 class="text-blue" style="font-size: 16px;">{{ tabGrade[calculateGrade] }}</h5>
        {% endif %}
    </div>

    <div style="padding-top: 5px; text-align: center; padding-bottom: 20px;">
        {% if objPlayer.getJob == "0" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Guerrier_Homme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "1" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Ninja_Femme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "2" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Sura_Homme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "3" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Chaman_Femme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "4" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Guerrier_Femme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "5" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Ninja_Homme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "6" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Sura_Femme.png" style="width: 60%;" />
        {% elseif objPlayer.getJob == "7" %}
            <img class="Position_Icone_Article_Personnage" src="../images/races/Chaman_Homme.png" style="width: 60%;" />
        {% endif %}
    </div>

</div>

<div class="col-lg-5 specialColumn">

    <div class="row" style="padding-top: 10px;">
        <div class="col-lg-12">

            {% if config.mod_player.repairPosition.activate %}
                <button style="margin-bottom: 5px;" type="button" data-tooltip="Débloquer la position" class="btn btn-flat btn-warning" onclick="Deblocage_Personnage('{{ encrypt(objPlayer.getId) }}');">
                    Débloquer
                </button>
            {% endif %}

            {% if objPlayer.getGold < 0 %}
                <button style="margin-bottom: 5px;" type="button" data-tooltip="Débloquer mes yangs" class="btn btn-flat btn-warning" onclick="Deblocage_Yangs('{{ encryptForUrl(objPlayer.getId) }}');">
                    Débloquer les yangs
                </button>
            {% endif %}

            {% if config.mod_player.rename.activate %}
                <button style="margin-bottom: 5px;" type="button" data-tooltip="Renommer le joueur" class="btn btn-flat btn-primary" onclick="Ajax('pages/MonPersonnage/PersonnageRenameForm.php?idPlayer={{ encryptForUrl(objPlayer.getId) }}');">
                    Renommer
                </button>
            {% endif %}

            {% if config.mod_player.delete.activate %}
                <button style="margin-bottom: 5px;" type="button" data-tooltip="Supprimer le joueur" class="btn btn-flat btn-danger" onclick="Ajax('pages/MonPersonnage/PersonnageDeleteForm.php?idPlayer={{ encryptForUrl(objPlayer.getId) }}');">
                    Supprimer
                </button>
            {% endif %}
        </div>
    </div>
        
    {% set expNecessaire = helpLevel(objPlayer.getLevel) %}
    {% set expPart1 = (expNecessaire / 4) %}
    {% set expPart2 = expPart1 + expPart1 %}
    {% set expPart3 = expPart2 + expPart1 %}
    {% set expPart4 = expPart3 + expPart1 %}
    {% set expActuel = objPlayer.getExp %}
    {% set proportionTotal = ((expActuel / expNecessaire) * 100)|round(2, 'floor') %}

    Expérience
    
    <div data-tooltip="{{ proportionTotal }} %">
        <svg height="32" width="32"> 
        <a transform="translate(16,16) scale(0.3) rotate(180)">
            <g>
            <circle r="50" stroke="grey" stroke-width="2" fill="none"></circle>
            </g>
            <g>
            <clipPath id="g-clip1">
                {% if expActuel >= expPart1 %}
                    <rect id="g-clip-rect" y="-50" height="100" x="-50" width="100"></rect>
                {% elseif expActuel > 0 %}
                    {% set proportionPx1 = ((expActuel) / expPart1 * 100)|round %}
                    <rect id="g-clip-rect" y="-50" height="{{ proportionPx1 }}" x="-50" width="100"></rect>
                {% else %}
                    <rect id="g-clip-rect" y="-50" height="0" x="-50" width="100"></rect>
                {% endif %}
            </clipPath>
            <circle clip-path="url(#g-clip1)" r="47" fill="#CCCC00" ></circle>
            </g>
        </a>
        </svg>

        <svg height="32" width="32"> 
        <a transform="translate(16,16) scale(0.3) rotate(180)">
            <g>
            <circle r="50" stroke="grey" stroke-width="2" fill="none"></circle>
            </g>
            <g>
            <clipPath id="g-clip2">
                {% if expActuel >= expPart2 %}
                    <rect id="g-clip-rect" y="-50" height="100" x="-50" width="100"></rect>
                {% elseif expActuel > expPart1 %}
                    {% set proportionPx2 = ((expActuel - expPart1) / expPart1 * 100)|round %}
                    <rect id="g-clip-rect" y="-50" height="{{ proportionPx2 }}" x="-50" width="100"></rect>
                {% else %}
                    <rect id="g-clip-rect" y="-50" height="0" x="-50" width="100"></rect>
                {% endif %}
            </clipPath>
            <circle clip-path="url(#g-clip2)" r="47" fill="#CCCC00" ></circle>
            </g>
        </a>
        </svg>

        <svg height="32" width="32"> 
        <a transform="translate(16,16) scale(0.3) rotate(180)">
            <g>
            <circle r="50" stroke="grey" stroke-width="2" fill="none"></circle>
            </g>
            <g>
            <clipPath id="g-clip3">
                {% if expActuel >= expPart3 %}
                    <rect id="g-clip-rect" y="-50" height="100" x="-50" width="100"></rect>
                {% elseif expActuel > expPart2 %}
                    {% set proportionPx3 = ((expActuel - expPart2) / expPart1 * 100)|round %}
                    <rect id="g-clip-rect" y="-50" height="{{ proportionPx3 }}" x="-50" width="100"></rect>
                {% else %}
                    <rect id="g-clip-rect" y="-50" height="0" x="-50" width="100"></rect>
                {% endif %}
            </clipPath>
            <circle clip-path="url(#g-clip3)" r="47" fill="#CCCC00" ></circle>
            </g>
        </a>
        </svg>

        <svg height="32" width="32"> 
        <a transform="translate(16,16) scale(0.3) rotate(180)">
            <g>
            <circle r="50" stroke="grey" stroke-width="2" fill="none"></circle>
            </g>
            <g>
            <clipPath id="g-clip4">
                {% if expActuel >= expPart4 %}
                    <rect id="g-clip-rect" y="-50" height="100" x="-50" width="100"></rect>
                {% elseif expActuel > expPart3 %}
                    {% set proportionPx4 = ((expActuel - expPart3) / expPart1 * 100)|round %}
                    <rect id="g-clip-rect" y="-50" height="{{ proportionPx4 }}" x="-50" width="100"></rect>
                {% else %}
                    <rect id="g-clip-rect" y="-50" height="0" x="-50" width="100"></rect>
                {% endif %}
            </clipPath>
            <circle clip-path="url(#g-clip4)" r="47" fill="#CCCC00" ></circle>
            </g>
        </a>
        </svg>
    </div>

    <table class="table table-condensed" style="border-collapse: collapse;">
        <tr>
            <td style="border-top:0px;">
                <span>Yangs</span>
            </td>
            <td style="border-top:0px;">{{ objPlayer.getGold|number_format }}</td>
        </tr>
        <tr>
            <td>
                <span>Temp de jeu</span>
            </td>
            <td>{{ getMinutesToString(objPlayer.getPlaytime) }}</td>
        </tr>

        <tr>
            <td>Dernière connexion</td>
            <td>{{ getFormatedDateTime(objPlayer.getLastPlay) }}</td>
        </tr>

        <tr>
            <td>
                {% if isConnected %}
                    <span>Map</span>
                {% else %}
                    <span>Map de sortie</span>
                {% endif %}
            </td>
            <td>{{ localisation.map }}</td>
        </tr>
        <tr>
            <td>
                <span>Position</span>
            </td>
            <td>{{ localisation.positionX }} - {{ localisation.positionY }}</td>
        </tr>
        <tr>
            <td>Guilde</td>
            {% if haveGuild == false %}
                <td>
                    Pas de guilde
                </td>
            {% else %}
                <td>
                    {{ haveGuild.name }}
                    <div class="pull-right" style="line-height: 10px;">
                        {% if haveGuild.isMaster %}
                            <i class="material-icons md-icon-person text-yellow" data-tooltip="Chef"></i>
                        {% else %}
                            <i class="material-icons md-icon-person text-gray" data-tooltip="Membre"></i>
                        {% endif %}
                    </div>
                </td>
            {% endif %}
        </tr>
        <tr>
            <td>Conjoint</td>
            {% if objMarriage == null %}
                <td>Célibataire</td>
            {% else %}
                {% if isWomen(objMarriage.job) %}
                    <td>Marié à {{ objMarriage.name }}</td>
                {% else %}
                    <td>Mariée à {{ objMarriage.name }}</td>
                {% endif %}
            {% endif %}
        </tr>

    </table>

    {% set totalPoint = (objPlayer.getHt + objPlayer.getIq + objPlayer.getSt + objPlayer.getDx) %}
    {% set propVit = ((objPlayer.getHt / totalPoint) * 100) %}
    {% set propInt = ((objPlayer.getIq / totalPoint) * 100)  %}
    {% set propStr = ((objPlayer.getSt / totalPoint) * 100)  %}
    {% set propDex = ((objPlayer.getDx / totalPoint) * 100)  %}

    <div class="progress-group">
        <span class="progress-text">VIT</span>
        <span class="progress-number"><b>{{ objPlayer.getHt }}</b>/127</span>

        <div class="progress sm">
            <div class="progress-bar progress-bar-red" style="width: {{ propVit }}%"></div>
        </div>
    </div>
    <div class="progress-group">
        <span class="progress-text">INT</span>
        <span class="progress-number"><b>{{ objPlayer.getIq }}</b>/127</span>
        <div class="progress sm">
            <div class="progress-bar progress-bar-aqua" style="width: {{ propInt }}%"></div>
        </div>
    </div>

    <div class="progress-group">
        <span class="progress-text">STR</span>
        <span class="progress-number"><b>{{ objPlayer.getSt }}</b>/127</span>

        <div class="progress sm">
            <div class="progress-bar progress-bar-green" style="width: {{ propStr }}%"></div>
        </div>
    </div>
    <div class="progress-group">
        <span class="progress-text">DEX</span>
        <span class="progress-number"><b>{{ objPlayer.getDx }}</b>/127</span>

        <div class="progress sm">
            <div class="progress-bar progress-bar-yellow" style="width: {{ propDex }}%"></div>
        </div>
    </div>

</div>

<div class="col-lg-3 specialColumn" style="padding-top: 10px; padding-bottom: 10px;">
    {{ viewEquipement|raw }}
    {{ viewInventaire|raw }}
</div>


<script type="text/javascript">
    Fonction_Reteneuse_Vamonaies({{ session.get("VamoNaies") }});
    Fonction_Reteneuse_Tananaies({{ session.get("TanaNaies") }});
</script>  